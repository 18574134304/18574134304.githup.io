(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30ca4168"],{"3d8b":function(e,t,s){},"498a":function(e,t,s){"use strict";var i=s("23e7"),n=s("58a8").trim,r=s("c8d2");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return n(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var i=s("1d80"),n=s("5899"),r="["+n+"]",o=RegExp("^"+r+r+"*"),a=RegExp(r+r+"*$"),u=function(e){return function(t){var s=String(i(t));return 1&e&&(s=s.replace(o,"")),2&e&&(s=s.replace(a,"")),s}};e.exports={start:u(1),end:u(2),trim:u(3)}},b86a:function(e,t,s){"use strict";var i=s("3d8b"),n=s.n(i);n.a},c8d2:function(e,t,s){var i=s("d039"),n=s("5899"),r="​᠎";e.exports=function(e){return i((function(){return!!n[e]()||r[e]()!=r||n[e].name!==e}))}},dd7b:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"mui-inner-wrap"},[s("header",{staticClass:"mui-bar mui-bar-nav"},[s("router-link",{staticClass:"mui-icon mui-icon-arrowleft mui-pull-left",attrs:{to:"/index"}}),s("span",[e._v("登录")]),s("router-link",{staticClass:"mui-pull-right",attrs:{to:"/register"}},[e._v("注册")])],1)]),s("div",{staticClass:"content"},[s("div",{staticClass:"mui-input-group"},[s("div",{staticClass:"mui-input-row"},[s("label",[e._v("手机：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPhone,expression:"userPhone"}],staticClass:"mui-input-clear",attrs:{oninput:"value=value.replace(/[^\\d]/g,'')",type:"number",placeholder:"请输入手机号码"},domProps:{value:e.userPhone},on:{input:function(t){t.target.composing||(e.userPhone=t.target.value)}}})]),s("div",{staticClass:"mui-input-row"},[s("label",[e._v("密码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userPwd,expression:"userPwd"}],staticClass:"mui-input-password",attrs:{oninput:"value=value.replace(/\\s+/g,'')",type:"password",placeholder:"请输入密码"},domProps:{value:e.userPwd},on:{input:function(t){t.target.composing||(e.userPwd=t.target.value)}}})])]),s("div",{staticClass:"btn_box"},[s("button",{on:{tap:e.login}},[e._v("登录")])]),s("div",{staticClass:"find_pwd mui-clearfix"},[s("router-link",{staticClass:"mui-pull-right",attrs:{to:"/findPassword"}},[e._v("找回密码")])],1)])])},n=[],r=(s("498a"),s("2729")),o=s.n(r),a=s("7678"),u=s.n(a),c={data:function(){return{userPhone:"",userPwd:""}},methods:{login:function(){var e=this,t=!0;if(e.mui(".login input").each((function(){if(!this.value||""==this.value.trim()){var s=this.previousElementSibling;return e.mui.alert(s.innerText+"不允许为空"),t=!1,!1}})),t){var s=new u.a.UserLogin_req,i=new o.a.MessageCarrier;s.setUsername(this.stringToByte(this.userPhone)),s.setUserpwd(this.userPwd);var n=s.serializeBinary();i.setMsgcmd(1),i.setMsgcon(n),i.setMsgtype(38);var r=i.serializeBinary();this.websocketsend(r)}},initWebSocket:function(){var e="wss://www.santint.cn/wss9002";this.websock=new WebSocket(e),this.websock.binaryType="arraybuffer",this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen:function(){console.log("连接成功")},websocketonerror:function(){this.initWebSocket()},websocketonmessage:function(e){var t=o.a.MessageCarrier.deserializeBinary(e.data),s=u.a.UserLogin_rsp.deserializeBinary(t.array[1]),i=s.array;i[1]?(this.mui.toast("登录成功"),i[4]=this.userPhone,window.sessionStorage.setItem("user",JSON.stringify(i)),this.$router.push("/index")):this.mui.toast("手机号或密码错误")},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){}},mounted:function(){this.initWebSocket()},destroyed:function(){this.websocketclose()}},l=c,d=(s("b86a"),s("2877")),p=Object(d["a"])(l,i,n,!1,null,"2bcad848",null);t["default"]=p.exports}}]);